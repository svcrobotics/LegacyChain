<div class="min-h-screen bg-gradient-to-b from-gray-100 via-white to-gray-100 font-sans flex">
  <!-- Main content -->
  <main class="flex-1 max-w-4xl mx-auto p-8">
    <h1 class="text-4xl font-extrabold text-indigo-700 mb-8 text-center">üëõ Mon Portefeuille Ethereum</h1>

    <div class="bg-white rounded-xl shadow-lg p-8">
      <!-- Adresse -->
      <div class="mb-6">
        <h2 class="text-sm uppercase text-gray-500 mb-1">Adresse connect√©e</h2>
        <p id="wallet" class="text-lg font-mono text-indigo-600 break-all">...</p>
      </div>

      <!-- Soldes -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
        <!-- Sepolia -->
        <div class="bg-indigo-50 p-6 rounded-lg shadow-sm border border-indigo-200">
          <h3 class="text-sm text-indigo-700 uppercase font-bold mb-2">R√©seau Sepolia</h3>
          <p id="sepoliaBalance" class="text-2xl font-bold text-indigo-900">...</p>
        </div>

        <!-- Mainnet -->
        <div class="bg-green-50 p-6 rounded-lg shadow-sm border border-green-200">
          <h3 class="text-sm text-green-700 uppercase font-bold mb-2">R√©seau Mainnet</h3>
          <p id="mainnetBalance" class="text-2xl font-bold text-green-900">...</p>
        </div>
      </div>
    </div>
  </main>
</div>


<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", async function () {
    const address = new URLSearchParams(window.location.search).get("address");

    document.getElementById("wallet").textContent = address;

    if (window.ethereum && address) {
      // Sepolia
      const apiKey = "T7TBWAJUSQZIZG5A3FT67JU9IRIA913VSY";
      const url = `https://api-sepolia.etherscan.io/api?module=account&action=balance&address=${address}&tag=latest&apikey=${apiKey}`;

      try {
        const resp = await fetch(url);
        const data = await resp.json();
        if (data.status === "1") {
          const ethBalance = Number(data.result) / 1e18;
          document.getElementById("sepoliaBalance").textContent = `${ethBalance} ETH`;
        }
      } catch {
        document.getElementById("sepoliaBalance").textContent = `‚ùå Erreur Sepolia`;
      }

      // Mainnet
      try {
        const provider = new ethers.providers.JsonRpcProvider("https://eth-mainnet.g.alchemy.com/v2/dpto4kpk6GC3rBIJakWcV");
        const balance = await provider.getBalance(address);
        const ethBalance = ethers.utils.formatEther(balance);
        document.getElementById("mainnetBalance").textContent = `${ethBalance} ETH`;
      } catch {
        document.getElementById("mainnetBalance").textContent = `‚ùå Erreur Mainnet`;
      }
    }
  });
</script>
